<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/paper-input/paper-input-container.html">
<link rel="import" href="../../bower_components/paper-input/paper-input-error.html">
<link rel="import" href="../../bower_components/iron-input/iron-input.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">

<dom-module id="variable-item">
  <template>
    <style>
    :host {
      display: block;
    }

    #container {
      @apply(--layout-horizontal);
      @apply(--layout-flex);
      @apply(--layout-end);
    }

    .variable-name {
      margin-right: 12px;
    }

    .variable-value {
      @apply(--layout-flex);
    }
    paper-checkbox {
      margin-bottom: 12px;
    }
    .remove-button {
      margin-bottom: 4px;
    }
    </style>
    <div id="container">
      <paper-checkbox checked="{{item.enabled}}" title="Enabled"></paper-checkbox>
      <paper-input-container class="variable-name" no-label-float inline auto-validate>
        <input is="iron-input" type="text" value="{{item.variable::input}}" placeholder="Variable name" required allowed-pattern="[a-zA-Z0-9_-]" prevent-invalid-input/>
        <paper-input-error>Variable name is not valid</paper-input-error>
      </paper-input-container>
      <paper-input-container class="variable-value" no-label-float inline auto-validate>
        <input is="iron-input" type="text" value="{{item.value::input}}" placeholder="Variable value" required />
        <paper-input-error>Variable value should not be empty</paper-input-error>
        <!-- <paper-icon-button suffix icon="arc:edit" title="Edit variable value in the editor" on-tap="_openVariableEditor"></paper-icon-button> -->
      </paper-input-container>
      <paper-icon-button class="remove-button" icon="close" title="Remove variable" on-tap="_removeVariable"></paper-icon-button>
    </div>
    <app-pouchdb-document id="doc" db-name="variables" doc-id="{{docId}}" data="{{item}}"></app-pouchdb-document>
  </template>
  <script src="variable-item.js"></script>
</dom-module>
